<div class="modal">
  <ion-header-bar>
    <h1 class="title">Add New User to Public</h1>
    <p class="button" ng-click="vm.closeAddUserModal()">Cancel</p>
  </ion-header-bar>
  <ion-content>
    <form name="vm.form" ng-submit="vm.authenticateAndAddUserWithMessage()">
      <div class="list form-group">
        <label class="item item-input">
          <span class="input-label">First &amp; Last Name</span>
          <input name="name"
                  type="text"
                  ng-model="vm.name"
                  ng-model-options="{ updateOn: 'blur' }"
                  ng-pattern="/.*\w+.* .*\w+.*/"
                  placeholder="First &amp; Last Name"
                  ng-required="true"
                  focus-me>
        </label>
        <label class="item item-input error-wrapper" style="border-top-style: none;" ng-show="vm.form.name.$touched && vm.form.name.$error.pattern">
          <span class="input-label"></span>
          <div class="error-message" style="color: red;">
            Please enter a first and last name.
          </div>
        </label>
        <label class="item item-input">
          <span class="input-label">Email</span>
          <input name="email"
                  type="email"
                  ng-model="vm.email"
                  ng-model-options="{ updateOn: 'blur' }"
                  placeholder="Email (optional)">
        </label>
        <label class="item item-input error-wrapper" style="border-top-style: none;" ng-show="vm.form.email.$touched && vm.form.email.$error.email">
          <span class="input-label"></span>
          <div class="error-message" style="color: red;">
            Please use a valid email address.
          </div>
        </label>
        <label class="item item-input">
          <span class="input-label">Phone</span>
          <input name="phone"
                  type="tel"
                  ng-model="vm.phone"
                  ng-model-options="{ updateOn: 'blur' }"
                  ng-pattern="/^\D*\+?(011)?(\D*\d\D*){10,16}/"
                  placeholder="Mobile Phone (optional)">
        </label>
        <label class="item item-input error-wrapper" style="border-top-style: none;" ng-show="vm.form.phone.$touched && vm.form.phone.$error.pattern">
          <span class="input-label"></span>
          <div class="error-message" style="color: red;">
            Please use a valid phone number.
          </div>
        </label>
        <label class="item item-input">
          <span class="input-label">Message</span>
          <input
            name="message"
            type="text"
            ng-model="vm.message"
            ng-model-options="{ updateOn: 'blur' }"
            placeholder="Say something to {{ (vm.name || '').length > 0 ? vm.name : 'this user' }}"
            required>
        </label>
        <label class="item item-input error-wrapper" style="border-top-style: none;" ng-show="vm.form.message.$touched && vm.form.message.$error.required">
          <span class="input-label"></span>
          <div class="error-message" style="color: red;">
            Please enter a message.
          </div>
        </label>
      </div>
      <p style="color:red">{{ vm.errorMessage }}</p>

      <button
        class="button button-full button-positive"
        ng-disabled="vm.form.$invalid">Add User</button>
    </form>
  </ion-content>
</div>
